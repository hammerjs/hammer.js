<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <style>

        body {
            font: 14px/20px 'Helvetica', 'Helvetica Neue', 'Arial';
        }

        #overflow {
            width: 500px;
            height: 500px;
            border: 1px inset;
            overflow: hidden;
            position: relative;
            background: #eee;
            -webkit-transform: translateZ(0);
        }

        #overflow .content {
            position: absolute;
            z-index: 1;
            top: 0;
            left: 0;
            padding: 10px;
            width: 480px;
            background: #fff;
            box-shadow: 0 0 5px #666;
        }

        #overflow .scrollbar {
            position: absolute;
            z-index: 10;
            top: 2px;
            bottom: 2px;
            right: 2px;
            width: 4px;
            overflow: hidden;
        }

        #overflow .scrollbar div {
            width: 4px;
            overflow: hidden;
            border-radius: 6px;
            background: rgba(0,0,0,.5);
            position: absolute;
            left: 0;
        }


    </style>
</head>

<body>

<div id="overflow">
    <div class="scrollbar"><div></div></div>
    <div class="content">
        <h1>HTML Ipsum Presents</h1>

        <p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>
        <p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>
        <p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>
        <p><strong>Pellentesque habitant morbi tristique</strong> senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. <em>Aenean ultricies mi vitae est.</em> Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, <code>commodo vitae</code>, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. <a href="#">Donec non enim</a> in turpis pulvinar facilisis. Ut felis.</p>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>

        <h2>Header Level 2</h2>

        <ol>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ol>

        <blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p></blockquote>

        <h3>Header Level 3</h3>

        <ul>
            <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            <li>Aliquam tincidunt mauris eu risus.</li>
        </ul>
    </div>
</div>

<div id="debug" style="white-space:pre;"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="hammer.js"></script>
<script>

    function debug(str) {
        $("#debug").prepend(str+"\n");
    }


    /**
     * super simple slideshow
     * animation between slides happens with css transitions
     */
    function TouchScroll(container, options)
    {
        container = $(container);
        var content = $(">.content", container);
        var scrollbar = $(">.scrollbar div", container);

        var self = this;
        var hammer = new Hammer(container.get(0), {
            drag: true,
            drag_vertical: true,
            drag_horizontal: true,
            drag_min_distance: 0,

            transform: false,
            tap: false,
            tap_double: false,
            hold: false
        });


        function getScrollPosition() {
            return {
                top: parseInt(content.css('top'), 10),
                left: parseInt(content.css('left'), 10)
            };
        }


        /**
         * get the dimensions of a element
         * @param   jQuery  el
         * @return  object  { width: int, height: int }
         */
        function getDimensions( el ) {
            return {
                width: el.outerWidth(),
                height: el.outerHeight()
            };
        }


        /**
         * scroll to given x and y
         * @param   int x
         * @param   int y
         */
        this.scrollTo = function(x, y)
        {

        };


        var scroll_start = {};
        var scroll_dim = {};
        var content_dim = {};

        hammer.ondragstart = function() {
            scroll_start = getScrollPosition();
            scroll_start.time = new Date().getTime();

            scroll_dim = getDimensions( container );
            content_dim = getDimensions( content );

            scrollbar.css({
                height: (100 / content_dim.height * scroll_dim.height) * (scroll_dim.height/100)
            }).stop().fadeTo(80, 1);
        };


        hammer.ondrag = function( ev ) {
            if(ev.direction == 'up' || ev.direction == 'left') {
                ev.distance = 0-ev.distance;
            }

            var delta = 1;

            var top = scroll_start.top + ev.distance * delta;
            content.css({ top: top });

            scrollbar.css({
                top: (100 / content_dim.height) * (0 - top) +"%"
            });
        };


        hammer.ondragend = function( ev ) {
            var scroll = getScrollPosition();
            var corrections = {};
            if(scroll.top > 0) {
                corrections.top = 0;
            }

            else if(scroll.top < -(content_dim.height - scroll_dim.height) ) {
                corrections.top = -(content_dim.height - scroll_dim.height);
            }

            content.animate(corrections, 400);
            scrollbar.stop().animate({
                top: (100 / content_dim.height) * (0 - corrections.top) +"%"
            }, 400);

            scrollbar.stop().fadeTo(80, 0);

        };
    }

    var scroll = new TouchScroll("#overflow");
    scroll.scrollTo(0, 200);


</script>
</body>
</html>
